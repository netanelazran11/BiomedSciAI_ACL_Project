# Main configuration for methylation fine-tuning (Age Regression)
#
# Usage:
#   python -m bmfm_methylation.finetune \
#       data_path=/path/to/methylation.h5ad \
#       checkpoint_path=./outputs/methylation/pretrain/best.ckpt \
#       output_directory=./outputs

defaults:
  - data_module: methylation
  - fields: methylation
  - trainer: methylation
  - task: finetune_age
  - model: scbert_methylation
  - _self_

# Paths
data_path: ???  # Required: path to h5ad file
output_directory: ./outputs/methylation
tokenizer_path: ./tokenizer
checkpoint_path: ???  # Required: path to pretrained checkpoint

# Training settings
finetune_epochs: 100
accumulate_grad_batches: 2

# Disable MLM for fine-tuning
mlm_enabled: false
collation_strategy: "sequence_classification"

# Seed
seed:
  seed_value: 42

# Regression head settings
regression_head:
  hidden_size: 256
  dropout: 0.1
  output_size: 1  # Single age prediction

# WandB logging
track_wandb:
  enabled: true
  project: "methylation-age"
  entity: null  # Set to your WandB entity
  name: "methylation_age_finetune"

# Early stopping
early_stopping:
  monitor: "val/mae"
  patience: 10
  mode: "min"
