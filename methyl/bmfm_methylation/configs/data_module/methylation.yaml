# Data module configuration for methylation data

_target_: bmfm_methylation.data_module.MethylationDataModule
_partial_: true

# Data paths (set via command line)
h5ad_path: ${data_path}
train_split: "train"
val_split: "valid"
test_split: "test"
age_column: "age"
split_column: "split"

# Data loading
batch_size: 32  # Flash Attention enabled - can use larger batches on H200
num_workers: 4
max_length: 8002  # 8000 CpG + [CLS] + [SEP]
padding: "max_length"
truncation: true
pad_to_multiple_of: 2  # 8002 is divisible by 2

# Age normalization
normalize_age: true

# MLM settings (for pretraining)
mlm: ${mlm_enabled}
change_ratio: 0.25  # 25% of values masked (higher for regression)
mask_ratio: 0.9     # 90% of candidates are replaced with [MASK]
switch_ratio: 0.0   # No random switching for continuous values

# Collation strategy
collation_strategy: ${collation_strategy}
